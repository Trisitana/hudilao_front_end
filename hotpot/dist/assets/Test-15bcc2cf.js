import{d as U,r as l,c as h,a as r,o as C,b as B,e as u,w as i,f as E,n as F,g as L,F as N,E as c,h as k}from"./index-077565e4.js";const z=["src"],P=U({__name:"Test",setup(I){l("");const d=l(""),f=l(!1),o=l(),t=l([]);function m(e){c({message:"图片上传成功",type:"success",duration:1500}),console.log(e),f.value=!0,d.value=e.data,console.log(d.value)}function _(e){if(!(e.size/1024/1024<1))return c({message:"图片大小不能超过1MB",type:"error",duration:1500}),!1}function g(){c({message:"图片上传失败",type:"error",duration:1500}),console.log("error")}const v=e=>{o.value.clearFiles();const a=e[0];a.uid=k(),o.value.handleStart(a)},b=h(()=>t.value.length>0),p=l(""),s=l(!1),y=e=>{p.value=e.url,s.value=!0};return(e,a)=>{const w=r("el-button"),x=r("el-upload"),V=r("el-dialog");return C(),B(N,null,[u(x,{ref_key:"upload",ref:o,action:"http://192.168.102.155:8082/images/upload",limit:1,"list-type":"picture-card",accept:".png, .jpg,.webp","file-list":t.value,"onUpdate:fileList":a[0]||(a[0]=n=>t.value=n),"on-success":m,"on-error":g,"on-exceed":v,"before-upload":_,class:F({disabled:b.value}),"on-preview":y},{default:i(()=>[u(w,{size:"small",type:"primary"},{default:i(()=>[E(" 点击上传 ")]),_:1})]),_:1},8,["file-list","class"]),u(V,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=n=>s.value=n)},{default:i(()=>[L("img",{"w-full":"",src:p.value,alt:"Preview Image"},null,8,z)]),_:1},8,["modelValue"])],64)}}});export{P as default};
